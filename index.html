<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Classroom</title>
  <link rel="icon" href="clasroom.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #0f0f0f;
      color: #fff;
      min-height: 100vh;
    }
    header {
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #222;
    }
    .logo { font-size: 1.25rem; font-weight: 600; }
    .search {
      background: #1a1a1a;
      border: 1px solid #333;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      color: #fff;
      font-family: inherit;
      font-size: 0.875rem;
      width: 240px;
      outline: none;
    }
    .search:focus { border-color: #555; }
    .search::placeholder { color: #666; }
    main { padding: 2rem; max-width: 1400px; margin: 0 auto; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
    }
    .card {
      background: #1a1a1a;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
    }
    .card:hover { transform: translateY(-4px); background: #222; }
    .card-img {
      aspect-ratio: 4/3;
      background: #252525;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .card-img img { width: 100%; height: 100%; object-fit: cover; }
    .card-img .placeholder { font-size: 2rem; font-weight: 600; color: #444; }
    .card-body { padding: 0.875rem; }
    .card-title { font-size: 0.875rem; font-weight: 500; color: #eee; }
    .card-type { font-size: 0.7rem; color: #666; margin-top: 0.25rem; }
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 1rem;
    }
    .modal.open { display: flex; }
    .modal-box {
      background: #1a1a1a;
      border-radius: 12px;
      width: 100%;
      height: 100%;
      max-width: 1200px;
      max-height: 800px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .modal-header {
      padding: 1rem 1.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #333;
    }
    .modal-title { font-size: 1rem; font-weight: 600; }
    .modal-actions { display: flex; gap: 0.5rem; }
    .btn {
      background: #252525;
      border: none;
      color: #fff;
      padding: 0.5rem 0.875rem;
      border-radius: 6px;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .btn:hover { background: #333; }
    .modal-body { flex: 1; position: relative; background: #000; }
    .modal-body iframe { width: 100%; height: 100%; border: none; }
    .loader {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0f0f0f;
    }
    .loader.hidden { display: none; }
    .spinner {
      width: 32px;
      height: 32px;
      border: 3px solid #333;
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .empty { text-align: center; padding: 4rem 2rem; color: #666; }
    @media (max-width: 600px) {
      header { flex-direction: column; gap: 1rem; }
      .search { width: 100%; }
      .grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">Games</div>
    <input type="text" class="search" id="search" placeholder="Search...">
  </header>
  <main>
    <div class="grid" id="grid"></div>
    <div class="empty" id="empty" style="display:none;">No games found.</div>
  </main>
  <div class="modal" id="modal">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title" id="modalTitle">Game</span>
        <div class="modal-actions">
          <button class="btn" id="fullscreenBtn">Fullscreen</button>
          <button class="btn" id="closeBtn">Close</button>
        </div>
      </div>
      <div class="modal-body" id="modalBody">
        <div class="loader" id="loader"><div class="spinner"></div></div>
        <iframe id="frame" allowfullscreen></iframe>
      </div>
    </div>
  </div>
  <script>
    // ============================================
    // CHANGE THIS TO YOUR ASSETS URL
    // ============================================
    const CDN = 'https://algebranotesk12.pages.dev/src';

    // ============================================
    // ADD YOUR GAMES HERE
    // ============================================
    // 
    // TWO TYPES:
    //
    // 1. LOCAL GAME (from your assets repo):
    //    { id: 'folder-name', title: 'Game Name', img: 'image.png' }
    //
    // 2. EMBED (external URL):
    //    { id: 'unique-id', title: 'Game Name', embed: 'https://example.com/game', img: 'https://example.com/image.png' }
    //
    // ============================================

    const games = [
      // Local games
      { id: 'retro-bowl', title: 'Retro Bowl', img: 'logo.png' },
      { id: 'drive-mad/drive-mad', title: 'Drive Mad', img: 'logo.jpg' },
      { id: 'moto-x3m', title: 'Moto X3M', img: 'moto.jpg' },
      { id: 'polytrack', title: 'Poly Track', img: 'null' },
      { id: 'slope', title: 'Slope', img: 'slope.jpg' },
      { id: 'minesweeper', title: 'Minesweeper', img: 'sweeper.jpg' },
      // Embeds (external URLs) - examples:
      // { id: 'krunker', title: 'Krunker', embed: 'https://krunker.io', img: 'https://krunker.io/img/logo.png' },
      // { id: 'scratch-game', title: 'Scratch Game', embed: 'https://scratch.mit.edu/projects/123456/embed', img: null },
    ];

    // ============================================
    // DON'T EDIT BELOW
    // ============================================
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');
    const search = document.getElementById('search');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const frame = document.getElementById('frame');
    const loader = document.getElementById('loader');
    const closeBtn = document.getElementById('closeBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');

    // Get the image URL based on game type
    function getImageUrl(game) {
      if (!game.img) return null;
      
      // If img is already a full URL (for embeds)
      if (game.img.startsWith('http')) {
        return game.img;
      }
      
      // Local game - build URL from CDN
      return `${CDN}/${game.id}/${game.img}`;
    }

    // Get the game URL
    function getGameUrl(game) {
      // If it's an embed, use the embed URL directly
      if (game.embed) {
        return game.embed;
      }
      
      // Local game - build URL from CDN
      return `${CDN}/${game.id}/index.html`;
    }

    function render(filter = '') {
      const filtered = games.filter(g => g.title.toLowerCase().includes(filter.toLowerCase()));
      if (filtered.length === 0) {
        grid.innerHTML = '';
        empty.style.display = 'block';
        return;
      }
      empty.style.display = 'none';
      
      grid.innerHTML = filtered.map(g => {
        const imgUrl = getImageUrl(g);
        const isEmbed = !!g.embed;
        
        return `
          <div class="card" data-id="${g.id}">
            <div class="card-img">
              ${imgUrl 
                ? `<img src="${imgUrl}" alt="${g.title}" onerror="this.outerHTML='<span class=placeholder>${g.title[0]}</span>'">`
                : `<span class="placeholder">${g.title[0]}</span>`}
            </div>
            <div class="card-body">
              <div class="card-title">${g.title}</div>
              ${isEmbed ? '<div class="card-type">External</div>' : ''}
            </div>
          </div>
        `;
      }).join('');
      
      grid.querySelectorAll('.card').forEach(card => {
        card.onclick = () => open(card.dataset.id);
      });
    }

    function open(id) {
      const game = games.find(g => g.id === id);
      if (!game) return;
      modalTitle.textContent = game.title;
      loader.classList.remove('hidden');
      frame.src = getGameUrl(game);
      frame.onload = () => loader.classList.add('hidden');
      modal.classList.add('open');
    }

    function close() {
      modal.classList.remove('open');
      frame.src = '';
    }

    search.oninput = () => render(search.value);
    closeBtn.onclick = close;
    fullscreenBtn.onclick = () => modalBody.requestFullscreen();
    modal.onclick = e => { if (e.target === modal) close(); };
    document.onkeydown = e => { if (e.key === 'Escape') close(); };
    render();
  </script>
</body>
</html>
